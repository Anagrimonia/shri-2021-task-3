(()=>{"use strict";(()=>{const e=function(){function e(e){var t=e.title,a=e.subtitle;this.element=document.createElement("div"),this.title=t,this.subtitle=a}return e.prototype.render=function(){this.element.classList.add("header");var e=document.createElement("h2");e.classList.add("headline","header__title"),e.innerText+=this.title,this.element.appendChild(e);var t=document.createElement("h3");return t.classList.add("text","header__subtitle"),t.innerText+=this.subtitle,this.element.appendChild(t),this},e.prototype.getElement=function(){return this.element},e}(),t=function(){function e(){this.element=document.createElement("div")}return e.prototype.setAvatar=function(e){var t=this.element.querySelector(".user-card__avatar");t&&this.element.removeChild(t);var a=document.createElement("div");a.classList.add("user-card__avatar","avatar"),this.element.appendChild(a);var i=document.createElement("img");i.src="assets/images/"+e,a.appendChild(i)},e.prototype.setName=function(e){var t=this.element.querySelector(".user-card__name");t&&this.element.removeChild(t);var a=document.createElement("p");a.classList.add("user-card__name","text","--text_truncation"),a.innerText+=e,this.element.appendChild(a)},e.prototype.setCaption=function(e){var t=this.element.querySelector(".user-card__caption");t&&this.element.removeChild(t);var a=document.createElement("p");a.classList.add("user-card__caption","caption","--text_truncation"),a.innerText+=e,this.element.appendChild(a)},e.prototype.setEmoji=function(e){var t=this.element.querySelector(".user-card__emoji");t&&this.element.removeChild(t);var a=document.createElement("p");a.classList.add("user-card__emoji"),a.innerText+=e,this.element.prepend(a)},e.prototype.hover=function(e){e?(this.element.classList.add("user-card--hoverable"),this.active(!1)):this.element.classList.remove("user-card--hoverable")},e.prototype.active=function(e){e?(this.element.classList.add("user-card--active"),this.hover(!1)):this.element.classList.remove("user-card--active")},e.prototype.render=function(e){var t=e.user,a=e.caption,i=e.style,r=e.orientation,n=e.emoji,s=e.hoverable;return this.element.classList.add("user-card","user-card--style_"+(i||"none"),"user-card--"+(r||"vertical")),this.setAvatar(t.avatar),this.setName(t.name),a&&this.setCaption(t.valueText),n&&this.setEmoji(n),s&&this.hover(!0),this},e.prototype.getElement=function(){return this.element},e}(),a=function(){function e(){this.margin={3:["0","13.3%","26.5%"],4:["0","13.3%","26.5%",""],5:["0","3%","3%","6%","6%"]},this.element=document.createElement("div")}return e.prototype.render=function(e){var t=e.winners,a=e.orientation;this.element.classList.add("podium");for(var i=t.length,r=0;r<i;r++){var n=document.createElement("div");n.classList.add("podium__step"),n.style.zIndex=String(i-r),n.style.marginTop=String(this.margin[i][r]),t[r].winner.getElement().classList.add("podium__user-card"),n.append(t[r].winner.getElement());var s=document.createElement("p");if(s.classList.add("headline","podium__place-number"),s.innerText=String(t[r].place+1),n.classList.add("--background_"+(0==r?"primary":"secondary")),"vertical"==a&&3==r){var o=document.createElement("div");o.classList.add("podium__divider"),n.append(o),n.style.zIndex=String(i),n.classList.add("podium__step--position_extra"),n.classList.remove("--background_secondary"),s.classList.add("podium__place-number--position_extra"),this.element.append(n)}else r%2==0?(n.classList.add("podium__step--position_"+(0==r?"center":"left")),this.element.prepend(n)):(n.classList.add("podium__step--position_right"),this.element.append(n));n.append(s)}return this},e.prototype.getElement=function(){return this.element},e}(),i=function(){function e(e,t){this.params={vertical:{steps:3},horizontal:{steps:5}},this.data=e,this.orientation=t}return e.prototype.render=function(){var e=this,i=this.params[this.orientation].steps,r=document.createElement("div");r.classList.add("--align_bottom");for(var n=[],s=0;s<i;s++){var o=(new t).render({user:this.data.users[s],caption:!0,emoji:0==s?this.data.emoji:void 0});n.push({winner:o,place:s})}if(this.data.selectedUserId){var d=this.data.users.findIndex((function(t){return t.id===e.data.selectedUserId})),c=(new t).render({user:this.data.users[d],caption:!0,emoji:"👍"});d>0&&d<i?n[d].winner.setEmoji("👍"):"horizontal"==this.orientation&&d>=4?n[n.length-1]={winner:c,place:d}:"vertical"==this.orientation&&d>=3&&n.push({winner:c,place:d})}var l=(new a).render({winners:n,orientation:this.orientation});return r.append(l.getElement()),r},e.prototype.setOrientation=function(e){this.orientation=e},e}(),r=function(){function e(){this.svg='<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">         <path fill-rule="evenodd" clip-rule="evenodd" d="M32 62C48.5685 62 62 48.5685 62 32C62 15.4315 48.5685 2 32 2C15.4315 2 2 15.4315 2 32C2 48.5685 15.4315 62 32 62ZM32 64C49.6731 64 64 49.6731 64 32C64 14.3269 49.6731 0 32 0C14.3269 0 0 14.3269 0 32C0 49.6731 14.3269 64 32 64ZM59 32C59 46.9117 46.9117 59 32 59C17.0883 59 5 46.9117 5 32C5 17.0883 17.0883 5 32 5C46.9117 5 59 17.0883 59 32ZM25.0607 27.9393C24.4749 27.3536 23.5251 27.3536 22.9393 27.9393C22.3536 28.5251 22.3536 29.4749 22.9393 30.0607L30.9393 38.0607C31.5251 38.6464 32.4749 38.6464 33.0607 38.0607L41.0607 30.0607C41.6464 29.4749 41.6464 28.5251 41.0607 27.9393C40.4749 27.3536 39.5251 27.3536 38.9393 27.9393L32 34.8787L25.0607 27.9393Z" />     </svg>',this.element=document.createElement("button")}return e.prototype.disabled=function(e){e?this.element.classList.add("button--disabled"):this.element.classList.remove("button--disabled")},e.prototype.render=function(e){var t=e.direction;return this.element.classList.add("button","button--direction_"+(t||"up")),this.element.innerHTML=this.svg,this},e.prototype.getElement=function(){return this.element},e}(),n=function(){function e(e,t){this.params={vertical:{order:[0,1,2,0,1,2,0,2],num:8,cols:3},horizontal:{order:[0,1,3,4,1,3],num:6,cols:5}},this.data=e,this.orientation=t}return e.prototype.render=function(){var e=this,a=this.params[this.orientation],i=(a.order,a.num),n=a.cols,s=this.data.offset||0,o=document.createElement("div");o.classList.add("user-grid","--align_center");var d=(new r).render({direction:"up"});d.getElement().classList.add("user-grid__button-up"),d.getElement().dataset.action="update",d.getElement().dataset.params=JSON.stringify({alias:"vote",data:{offset:s-i>0?s-i:0}});var c=(new r).render({direction:"down"});c.getElement().classList.add("user-grid__button-down"),c.getElement().dataset.action="update",c.getElement().dataset.params=JSON.stringify({alias:"vote",data:{offset:s+i<this.data.users.length?s+i:0}}),d.disabled(0==s),c.disabled(s+i>=this.data.users.length);for(var l=[],p=0;p<n;p++){var u=document.createElement("div");u.style.order=String(p+1),u.classList.add("user-grid__column"),o.append(u),l.push(u),p+1==Math.ceil(n/2)&&(u.append(d.getElement()),u.append(c.getElement()))}var h=this.data.users.slice(s,s+i).map((function(e){return(new t).render({user:e,hoverable:!0})}));if(this.data.selectedUserId){var m=this.data.users.findIndex((function(t){return t.id===e.data.selectedUserId}))-s;m>=0&&m<h.length&&(h[m].active(!0),h[m].setEmoji("👍"))}for(p=0;p<i;p++){var f;p<h.length?((f=h[p].getElement()).dataset.action="update",f.dataset.params=JSON.stringify({alias:"leaders",data:{selectedUserId:this.data.users[p].id}})):((f=document.createElement("div")).classList.add("user-card"),f.style.height="142px"),l[this.params[this.orientation].order[p]].append(f)}return o},e.prototype.setOrientation=function(e){this.orientation=e},e}(),s=function(){function e(e,t){this.data=e,this.orientation=t}return e.prototype.render=function(){var e=document.createElement("div");e.classList.add("--align_bottom");var a=document.createElement("div");a.classList.add("chart"),e.append(a);var i=Math.floor((window.innerWidth/2+188+8)/64);"horizontal"==this.orientation&&(i+=1);for(var r=Math.max.apply(Math,this.data.values.map((function(e){return e.value}))),n=this.data.values.findIndex((function(e){return e.active})),s=n-i+3;s<n+3;s++){var o=this.data.values[s]?this.data.values[s]:{title:"-",value:0,active:!1},d=o.title,c=o.value,l=(o.active,document.createElement("div"));l.classList.add("chart__sprint"),this.data.values[s]||(l.style.opacity="0.3"),a.append(l);var p=c/r*70*("horizontal"===this.orientation?.8:.9),u=n==s?"primary":"secondary",h=document.createElement("p");h.classList.add("chart__commits","subhead","--color_"+u),h.innerText=0!=c?String(c):"",l.append(h);var m=document.createElement("div");m.classList.add("chart__column","chart__column--bg_"+u),m.style.height=0==p?"10px":String(p)+"%",l.append(m);var f=document.createElement("p");f.classList.add("chart__number","text"),f.innerText=d,l.append(f)}var v=document.createElement("div");for(v.classList.add("chart-top"),e.append(v),s=0;s<2;s++){var _=(new t).render({user:this.data.users[s],caption:!0,orientation:"horizontal"});if(v.append(_.getElement()),1!=s){var y=document.createElement("p");y.classList.add("chart-top__divider","divider"),v.append(y)}}return e},e.prototype.setOrientation=function(e){this.orientation=e},e}();var o=[["0 0 0 0 0.972549 0 0 0 0 0.618715 0 0 0 0 0 0 0 0 0.2 0","0 0 0 0 1 0 0 0 0 0.636666 0 0 0 0 0 0 0 0 0.9 0"],["0 0 0 0 0.575 0 0 0 0 0.365803 0 0 0 0 0 0 0 0 0.2 0","0 0 0 0 0.791667 0 0 0 0 0.504028 0 0 0 0 0 0 0 0 0.9 0"],["0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0","0 0 0 0 0.545833 0 0 0 0 0.545833 0 0 0 0 0.545833 0 0 0 0.9 0"],["0 0 0 0 0.375 0 0 0 0 0.375 0 0 0 0 0.375 0 0 0 0.2 0","0 0 0 0 0.15 0 0 0 0 0.15 0 0 0 0 0.15 0 0 0 0.9 0"]],d=[["0 0 0 0 1 0 0 0 0 0.69 0 0 0 0 0.225 0 0 0 0.9 0"],["0 0 0 0 1 0 0 0 0 0.69 0 0 0 0 0.225 0 0 0 0.4 0"],["0 0 0 0 0.4125 0 0 0 0 0.4125 0 0 0 0 0.4125 0 0 0 0.2 0"],["0 0 0 0 0.5125 0 0 0 0 0.5125 0 0 0 0 0.5125 0 0 0 0.6 0"]];function c(e){return e>3?"":'<filter id="light_filter_'+e+'" color-interpolation-filters="sRGB" x="-100" y="-100" width="200" height="200" filterUnits="userSpaceOnUse" >            <feFlood flood-opacity="0" result="BackgroundImageFix"/>           <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>           <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>           <feOffset/>           <feGaussianBlur stdDeviation="10"/>           <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>           <feColorMatrix type="matrix" values="'+d[e][0]+'"/>           <feBlend mode="normal" in2="shape" result="effect1_innerShadow"/>           <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>           <feOffset dx="-1" dy="1"/>           <feGaussianBlur stdDeviation="0.5"/>           <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>           <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"/>           <feBlend mode="normal" in2="effect1_innerShadow" result="effect2_innerShadow"/>           </filter>'}var l=[[{opacity:".8",offset:"0.71875",color:"#FFA300"},{opacity:".8",offset:"1",color:"#5B3A00"}],[{opacity:".5",offset:"0.7292",color:"#633F00"},{opacity:".5",offset:"1",color:"#0F0900"}],[{opacity:".5",offset:"0.71875",color:"#9B9B9B"},{opacity:".5",offset:"1",color:"#382900"}],[{opacity:".5",offset:"0.71875",color:"#4D4D4D"},{opacity:".5",offset:"1",color:"#382900"}]];function p(e){return e>3?"":'<radialGradient id="dark_fill_'+e+'" cx="0" cy="0" r="100" gradientUnits="userSpaceOnUse" gradientTransform="scale(1)">           <stop stop-opacity="'+l[e][0].opacity+'" offset="'+l[e][0].offset+'" stop-color="'+l[e][0].color+'"/>           <stop stop-opacity="'+l[e][1].opacity+'" offset="'+l[e][1].offset+'" stop-color="'+l[e][1].color+'"/>           </radialGradient>'}var u=[[{opacity:".56",offset:"0.8125",color:"#FFB800"},{opacity:".32",offset:"1",color:"#FFEF99"}],[{opacity:".24",offset:"0.8125",color:"#FFB800"},{opacity:".12",offset:"1",color:"#FFEF99"}],[{opacity:".1725",offset:"0.8281",color:"#A6A6A6"},{opacity:".05",offset:"0.9219",color:"#CBCBCB"}],[{opacity:".345",offset:"0.8281",color:"#BFBFBF"},{opacity:".1",offset:"0.9219",color:"#E4E4E4"}]];function h(e){return e>3?"":'<radialGradient id="light_fill_'+e+'" cx="0.5" cy="0.5" r="100" gradientUnits="userSpaceOnUse" gradientTransform="scale(1)">           <stop stop-opacity="'+u[e][0].opacity+'" offset="'+u[e][0].offset+'" stop-color="'+u[e][0].color+'"/>           <stop stop-opacity="'+u[e][1].opacity+'" offset="'+u[e][1].offset+'" stop-color="'+u[e][1].color+'"/>           </radialGradient>'}const m=function(){function e(){var e=this;this.RAD_DEG=Math.PI/180,this.PI2=2*Math.PI,this._pointOnArc=function(t,a,i){var r=(i-90)*e.RAD_DEG;return[t[0]+a*Math.cos(r),t[1]+a*Math.sin(r)]},this._drawCircle=function(e,t,a){var i=t-a,r=e[0],n=e[1];return["M",r-t,n,"A",t,t,0,1,0,r+t,n,"A",t,t,0,1,0,r-t,n,"M",r-i,n,"A",i,i,0,1,0,r+i,n,"A",i,i,0,1,0,r-i,n,"Z"]},this._drawSector=function(t,a,i,r,n,s){var o=a-n,d=Math.abs(r-i);(s=Math.min(n/2,s))/(Math.PI*(a-n))*360>Math.abs(i-r)&&(s=d/360*o*Math.PI);var c=o+s,l=a-s,p=e._pointOnArc(t,l,i),u=e._pointOnArc(t,l,r),h=e._pointOnArc(t,c,i),m=e._pointOnArc(t,c,r),f=s/(e.PI2*o)*360,v=s/(e.PI2*a)*360,_=e._pointOnArc(t,o,i+f),y=e._pointOnArc(t,o,r-f),g=e._pointOnArc(t,a,i+v),x=e._pointOnArc(t,a,r-v),E=d>180+2*v?1:0,L=d>180+2*f?1:0;return["M",p[0],p[1],"A",s,s,0,0,1,g[0],g[1],"A",a,a,0,E,1,x[0],x[1],"A",s,s,0,0,1,u[0],u[1],"L",m[0],m[1],"A",s,s,0,0,1,y[0],y[1],"A",o,o,0,L,0,_[0],_[1],"A",s,s,0,0,1,h[0],h[1],"Z"].join(" ")},this.element=document.createElement("div");var t=document.getElementsByTagName("body")[0].className.match(/theme_(.*)/);this.theme=t&&t.length>1&&("light"==t[1]||"dark"==t[1])?t[1]:"light"}return e.prototype.render=function(e){var t=e.percents.map((function(e){return 3.6*e}));this.element.classList.add("pie-chart");var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","-100 -100 200 200"),a.classList.add("pie-chart__svg"),this.element.append(a);for(var i,r=0,n=0;n<4;n++)if(0!=t[n]){a.innerHTML+="dark"==this.theme?(i=n)>3?"":'<filter id="dark_filter_'+i+'" x="-100" y="-100" width="200" height="200" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">          \n          <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n          <feMorphology radius="8" operator="erode" in="SourceAlpha" result="effect1_dropShadow"/>\n          <feOffset/>\n          <feGaussianBlur stdDeviation="10"/>\n          <feColorMatrix type="matrix" values="'+o[i][0]+'"/>\n          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n          <feOffset/>\n          <feGaussianBlur stdDeviation="10"/>\n          <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n          <feColorMatrix type="matrix" values="'+o[i][1]+'"/>\n          <feBlend mode="normal" in2="shape" result="effect2_innerShadow"/>\n          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n          <feOffset dx="-1" dy="1"/>\n          <feGaussianBlur stdDeviation="0.5"/>\n          <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n          <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"/>\n          <feBlend mode="normal" in2="effect2_innerShadow" result="effect3_innerShadow"/>\n          </filter>':c(n),a.innerHTML+="dark"==this.theme?p(n):h(n);var s=document.createElement("path");s.setAttribute("d",this._drawSector([0,0],100,r+2+330,r+t[n]+330,30,6)),s.setAttribute("fill","url(#"+this.theme+"_fill_"+n+")"),s.setAttribute("filter","url(#"+this.theme+"_filter_"+n+")"),a.append(s),r+=t[n]}return this},e.prototype.getElement=function(){return this.element},e}(),f=function(){function e(e,t){this.data=e,this.orientation=t}return e.prototype.render=function(){var e=this.data.categories.map((function(e){return Number(e.valueText.substr(0,e.valueText.indexOf(" ")))})),t=e.reduce((function(e,t){return e+t})),a=e.map((function(e){return e/t*100})),i=document.createElement("div");i.classList.add("diagram-page"),i.classList.add("--align_bottom");var r=document.createElement("div");r.classList.add("diagram"),i.append(r);var n=(new m).render({percents:a});n.getElement().classList.add("diagram__pie-chart"),r.append(n.getElement());var s=document.createElement("div");s.classList.add("diagram__text-block"),r.append(s);var o=document.createElement("p");o.classList.add("diagram__title","vertical"==this.orientation?"headline":"subhead"),o.innerText=this.data.totalText,s.append(o);var d=document.createElement("p");d.classList.add("diagram__subtitle","subhead","vertical"==this.orientation?"subhead":"text"),d.innerText=this.data.differenceText,s.append(d);var c=document.createElement("div");c.classList.add("diagram-history"),i.append(c);for(var l=0;l<this.data.categories.length;l++){var p=this.data.categories[l],u=p.title,h=p.valueText,f=p.differenceText,v=document.createElement("div");v.classList.add("diagram-history__row"),c.append(v);var _=document.createElement("div");_.classList.add("diagram-history__dot","--style-diagram-"+l),v.append(_);var y=document.createElement("p");y.classList.add("diagram-history__title","text"),y.innerText=u,v.append(y);var g=document.createElement("p");g.classList.add("diagram-history__difference","text"),g.innerText=f.substr(0,f.indexOf(" ")),v.append(g);var x=document.createElement("p");if(x.classList.add("diagram-history__value","text"),x.innerText=h.substr(0,h.indexOf(" ")),v.append(x),l!=this.data.categories.length-1){var E=document.createElement("div");E.classList.add("diagram-history__divider","divider"),c.append(E)}}return i},e.prototype.setOrientation=function(e){this.orientation=e},e}(),v=function(){function e(e,t){this.days=["mon","tue","wed","thu","fri","sat","sun"],this.params={vertical:{hours:1,text:"1 час"},horizontal:{hours:2,text:"2 часа"}},this.data=e,this.orientation=t}return e.prototype.render=function(){for(var e=this.params[this.orientation],t=e.hours,a=e.text,i=[],r=0;r<7;r++){i.push([]);for(var n=0;n<24;n+=t){var s=this.days[r];"horizontal"==this.orientation?i[r].push(this.data.data[s][n]+this.data.data[s][n+1]):i[r].push(this.data.data[s][n])}}var o=[0,0,0,0],d=i.map((function(e){return Math.max.apply(Math,e)}));for(o[3]=Math.max.apply(null,d),r=1;r<3;r++)o[r]=o[r-1]+Math.floor(o[3]/3);var c=document.createElement("div");c.classList.add("activity-page");var l=document.createElement("div");l.classList.add("activity-chart"),c.append(l);var p="horizontal"==this.orientation?[7,24/t]:[24/t,7],u=p[0],h=p[1];for(r=0;r<u;r++)for(n=0;n<h;n++){for(var m=document.createElement("div"),f="horizontal"==this.orientation?i[r][n]:i[n][r],v=0;f>o[v];)v++;m.classList.add("activity-chart__polygon-"+v,"activity-chart__polygon"),l.append(m)}var _=document.createElement("div");for(_.classList.add("activity-history"),c.append(_),r=0;r<5;r++){var y=document.createElement("div");y.classList.add("activity-history__interval-"+r,"activity-history__interval"),_.append(y);var g=document.createElement("div");if(g.classList.add("activity-history__text","text"),0==r)g.innerText=a;else if(1==r)g.innerText=""+o[0];else{var x=o[r-2]+1!=o[r-1];g.innerText=x?o[r-2]+1+" — "+o[r-1]:""+o[r-1]}y.append(g)}return c},e.prototype.setOrientation=function(e){this.orientation=e},e}();window.renderTemplate=function(t,a){window.onresize=c,window.onload=c,t=t,a=a;var r,o=d();switch(t){case"leaders":r=new i(a,o);break;case"vote":r=new n(a,o);break;case"chart":r=new s(a,o);break;case"diagram":r=new f(a,o);break;case"activity":r=new v(a,o)}function d(){return window.innerWidth>window.innerHeight?"horizontal":"vertical"}function c(){var e=d();o!=e&&(o=e,r.setOrientation(e),document.body.innerHTML=l())}function l(){var t=document.createElement("div");t.classList.add("slide");var i=new e({title:a.title,subtitle:a.subtitle}).render();t.append(i.getElement());var n=r.render();return n.classList.add("slide-content"),t.append(n),t.outerHTML}return l()}})()})();